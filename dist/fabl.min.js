!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Fabl=t():e.Fabl=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),a=r(o),u=n(50),i=r(u),c=n(53),s=r(c),l=n(58),f=r(l);e.exports={embedStory:a["default"],loadScripts:i["default"],tracking:s["default"],VERSION:f["default"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=(0,a.validateElement)(e,c+": expected first argument to be a DOM element"),r=(0,a.validateString)(t,c+": expected second argument to be a Fabl story URL"),o=(0,i["default"])(r);o.render(n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(2),u=n(45),i=r(u),c="embedStory"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(3),a=r(o),u=n(6),i=r(u),c=n(13),s=r(c),l=n(41),f=r(l),p=n(43),d=r(p),v=n(44),b=r(v);e.exports={validateCallback:a["default"],validateElement:i["default"],validateEventName:s["default"],validateEventTrigger:f["default"],validateString:d["default"],validateUrls:b["default"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(e&&!(0,u["default"])(e))throw new Error(t);var n=function(){e&&e()};return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(4),u=r(a)},function(e,t,n){function r(e){var t=o(e)?c.call(e):"";return t==a||t==u}var o=n(5),a="[object Function]",u="[object GeneratorFunction]",i=Object.prototype,c=i.toString;e.exports=r},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e;if(e&&e[0]&&(n=e[0]),!(0,u["default"])(n))throw new Error(t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(7),u=r(a)},function(e,t,n){function r(e){return!!e&&1===e.nodeType&&o(e)&&!a(e)}var o=n(8),a=n(9);e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e){if(!u(e)||p.call(e)!=i||a(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}var o=n(10),a=n(12),u=n(8),i="[object Object]",c=Object.prototype,s=Function.prototype.toString,l=c.hasOwnProperty,f=s.call(Object),p=c.toString;e.exports=r},function(e,t,n){var r=n(11),o=Object.getPrototypeOf,a=r(o,Object);e.exports=a},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(0,u["default"])(i.EVENT_NAMES,e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(14),u=r(a),i=n(40)},function(e,t,n){function r(e,t,n,r){e=a(e)?e:c(e),n=n&&!r?i(n):0;var l=e.length;return n<0&&(n=s(l+n,0)),u(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&o(e,t,n)>-1}var o=n(15),a=n(18),u=n(22),i=n(24),c=n(28),s=Math.max;e.exports=r},function(e,t,n){function r(e,t,n){if(t!==t)return o(e,a,n);for(var r=n-1,u=e.length;++r<u;)if(e[r]===t)return r;return-1}var o=n(16),a=n(17);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}e.exports=n},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t,n){function r(e){return null!=e&&u(o(e))&&!a(e)}var o=n(19),a=n(4),u=n(21);e.exports=r},function(e,t,n){var r=n(20),o=r("length");e.exports=o},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!o(e)&&a(e)&&c.call(e)==u}var o=n(23),a=n(8),u="[object String]",i=Object.prototype,c=i.toString;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(25);e.exports=r},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=o(e),e===a||e===-a){var t=e<0?-1:1;return t*u}return e===e?e:0}var o=n(26),a=1/0,u=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(u(e))return i;if(a(e)){var t=o(e.valueOf)?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=l.test(e);return n||f.test(e)?p(e.slice(2),n?2:8):s.test(e)?i:+e}var o=n(4),a=n(5),u=n(27),i=NaN,c=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&i.call(e)==a}var o=n(8),a="[object Symbol]",u=Object.prototype,i=u.toString;e.exports=r},function(e,t,n){function r(e){return e?o(e,a(e)):[]}var o=n(29),a=n(31);e.exports=r},function(e,t,n){function r(e,t){return o(t,function(t){return e[t]})}var o=n(30);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function r(e){var t=s(e);if(!t&&!i(e))return a(e);var n=u(e),r=!!n,l=n||[],f=l.length;for(var p in e)!o(e,p)||r&&("length"==p||c(p,f))||t&&"constructor"==p||l.push(p);return l}var o=n(32),a=n(33),u=n(34),i=n(18),c=n(38),s=n(39);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&(u.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(10),a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(11),o=Object.keys,a=r(o,Object);e.exports=a},function(e,t,n){function r(e){var t=e?e.length:void 0;return i(t)&&(u(e)||c(e)||a(e))?o(t,String):null}var o=n(35),a=n(36),u=n(23),i=n(21),c=n(22);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return o(e)&&i.call(e,"callee")&&(!s.call(e,"callee")||c.call(e)==a)}var o=n(37),a="[object Arguments]",u=Object.prototype,i=u.hasOwnProperty,c=u.toString,s=u.propertyIsEnumerable;e.exports=r},function(e,t,n){function r(e){return a(e)&&o(e)}var o=n(18),a=n(8);e.exports=r},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.CLICKED_LINK="Clicked Link";t.EVENT_NAMES=[n]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(0,u["default"])(i.EVENT_TRIGGERS,e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(14),u=r(a),i=n(42)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.CLICK="click";t.EVENT_TRIGGERS=[n]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(0,u["default"])(e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(22),u=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=void 0;if((0,c["default"])(e)?n=[e]:(0,u["default"])(e)&&(n=e),!n)throw new Error(t);return n.forEach(function(e){(0,l["default"])(e,t)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(23),u=r(a),i=n(22),c=r(i),s=n(43),l=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return function(n){if(!e||!e.contentWindow)throw new Error("Fabl.embedStory: unable to communicate with embedded story (could not find target)");e.contentWindow.postMessage(n,t)}}function a(e,t){var n=document.createElement("iframe");return n.setAttribute("allowfullscreen",!0),n.setAttribute("height",t+"px"),n.setAttribute("src",e),n.setAttribute("style","background-color: transparent; border: none; overflow-y: hidden;"),n.setAttribute("width","100%"),n}function u(e){var t=(0,s["default"])(e);return t.origin||"*"}function i(e){var t=800,n=a(e,t),r=u(e),i=o(n,r),c=function(e){e.appendChild(n)},s=function(e){e!==t&&(n.setAttribute("height",e+"px"),t=e)};return n.addEventListener("load",function(){i(l)}),window.addEventListener("message",function(e){if(e.origin===r&&f.test(e.data)){var t=e.data.match(f),n=parseInt(t[1],10);s(n)}}),{render:c,resize:s}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var c=n(46),s=r(c),l="fabl:embed:init",f=/^fabl:document:height\((\d+)\)$/},function(e,t,n){"use strict";function r(e){var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function o(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],a=!1,u=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),u++):u&&(0===r&&(a=!0),n.splice(r,1),u--);return a&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var s,f,p,d,v,b,h=l.slice(),m=typeof t,g=this,y=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=c.parse),t=i(t),f=r(e||""),s=!f.protocol&&!f.slashes,g.slashes=f.slashes||s&&t.slashes,g.protocol=f.protocol||t.protocol||"",e=f.rest,f.slashes||(h[2]=[/(.*)/,"pathname"]);y<h.length;y++)d=h[y],p=d[0],b=d[1],p!==p?g[b]=e:"string"==typeof p?~(v=e.indexOf(p))&&("number"==typeof d[2]?(g[b]=e.slice(0,v),e=e.slice(v+d[2])):(g[b]=e.slice(v),e=e.slice(0,v))):(v=p.exec(e))&&(g[b]=v[1],e=e.slice(0,v.index)),g[b]=g[b]||(s&&d[3]?t[b]||"":""),d[4]&&(g[b]=g[b].toLowerCase());n&&(g.query=n(g.query)),s&&t.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==t.pathname)&&(g.pathname=o(g.pathname,t.pathname)),u(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(d=g.auth.split(":"),g.username=d[0]||"",g.password=d[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}var u=n(47),i=n(48),c=n(49),s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];a.prototype.set=function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||c.parse)(t)),r[e]=t;break;case"port":r[e]=t,u(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":r.pathname="/"===t.charAt(0)?t:"/"+t;break;default:r[e]=t}for(var o=0;o<l.length;o++){var a=l[o];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},a.prototype.toString=function(e){e&&"function"==typeof e||(e=c.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,t="object"==typeof n.query?e(n.query):n.query,t&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o},a.extractProtocol=r,a.location=i,a.qs=c,e.exports=a},function(e,t){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){(function(t){"use strict";var r,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a={hash:1,query:1};e.exports=function(e){e=e||t.location||{},r=r||n(46);var u,i={},c=typeof e;if("blob:"===e.protocol)i=new r(unescape(e.pathname),{});else if("string"===c){i=new r(e,{});for(u in a)delete i[u]}else if("object"===c){for(u in e)u in a||(i[u]=e[u]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function r(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)o.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var o=Object.prototype.hasOwnProperty;t.stringify=r,t.parse=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=(0,s.validateUrls)(e,l+": expected first argument to be a url string or an array of url strings"),r=(0,s.validateCallback)(t,l+": expected second argument to be a callback function (optional)"),o=n.length;if(0===o)return void setTimeout(r,0);var a=(0,u["default"])(o,r);n.forEach(function(e){return(0,c["default"])(e,a)})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(51),u=r(a),i=n(52),c=r(i),s=n(2),l="loadScripts"},function(e,t,n){function r(e,t){if("function"!=typeof t)throw new TypeError(a);return e=o(e),function(){if(--e<1)return t.apply(this,arguments)}}var o=n(24),a="Expected a function";e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.getElementsByTagName("head")[0];t.appendChild(e)}function a(e,t){var n=(0,f["default"])(e.readyState);return n?void(e.onreadystatechange=function(){var n=e.readyState;switch(n){case"complete":case"loaded":e.onreadystatechange=null,t()}}):void(e.onload=function(){t()})}function u(e){var t=document.createElement("script");return t.setAttribute("async",!0),t.setAttribute("src",e),t}function i(e,t){var n=u(e);(0,s["default"])(t)&&a(n,t),o(n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var c=n(4),s=r(c),l=n(22),f=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(54),i=o(u),c=n(40),s=r(c),l=n(42),f=r(l),p=n(56),d=o(p),v=n(57),b=o(v);e.exports=a({},s,f,{attachToElement:i["default"],setup:d["default"],triggerEvent:b["default"]})},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?a.CLICK:arguments[2],r=(0,u.validateElement)(e,i+": expected first argument to be a DOM element"),c=(0,u.validateEventName)(t,i+": expected second argument to be a valid event name"),s=(0,u.validateEventTrigger)(n,i+": expected third argument to be a valid event trigger (default: 'click'"),l=function(e){var t=(0,o.getEventHandler)();t(c,r,e)};r.addEventListener(s,l)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(55),a=n(42),u=n(2),i="tracking.attachToElement"},function(e,t){"use strict";function n(){return o}function r(e){o=e}Object.defineProperty(t,"__esModule",{value:!0}),t.getEventHandler=n,t.setEventHandler=r;var o=function(e,t,n){console.info("tracking: received a '"+e+"' event")}},function(e,t,n){"use strict";function r(e){(0,o.setEventHandler)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(55)},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=(0,a.validateEventName)(e,u+": expected first argument to be a valid event name"),i=(0,a.validateElement)(t,u+": expected second argument to be a valid element"),c=(0,o.getEventHandler)();c(r,i,n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(55),a=n(2),u="tracking.triggerEvent"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(59);t["default"]=r.version},function(e,t){e.exports={name:"fabl-js",version:"1.2.2",description:"The Fabl Javascript SDK",author:"Fabl <developers@fabl.co>",license:"ISC",repository:{type:"git",url:"https://github.com/FablCo/fabl-js.git"},bugs:"https://github.com/FablCo/fabl-js/issues",main:"lib/fabl.js",scripts:{"build:assets:development":"$(npm bin)/webpack --config config/webpack/development.config.js --display-error-details --verbose","build:assets:production":"$(npm bin)/webpack --config config/webpack/production.config.js --display-error-details --progress --verbose","build:lib":"$(npm bin)/babel ./src --out-dir ./lib","compress:assets:production":"gzip --best --force --keep ./dist/fabl.min.js",clean:"npm run clean:dist && npm run clean:lib","clean:dist":"$(npm bin)/rimraf ./dist","clean:lib":"$(npm bin)/rimraf ./lib",dist:"npm run clean && npm run build:lib && npm run build:assets:production && npm run compress:assets:production"},dependencies:{lodash:"^4.14.1","url-parse":"^1.1.6"},devDependencies:{"babel-cli":"^6.11.4","babel-core":"^6.11.4","babel-loader":"^6.2.4","babel-preset-es2015":"^6.9.0","babel-preset-stage-1":"^6.5.0","json-loader":"^0.5.4",rimraf:"^2.5.4","unminified-webpack-plugin":"^1.1.0",webpack:"^1.13.1"}}}])});
//# sourceMappingURL=fabl.min.js.map